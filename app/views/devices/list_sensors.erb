<h1 style="color: black; margin: 30px 10px;">All Sensors</h1>

<div class="container" >
  <div class="form-group">
    <select id="filter_sensors" onChange="sensorSearch()" class="form-control">
      <option value="false">Display all</option>
      <option value="true">Only Alerts</option>
    </select>
  </div>
  <div class="row">
    <div class="jumbotron" style="background: white; border-radius:20px;">
      <% if flash.has?(:message) %>
      <div class="alert alert-success alert-dismissible" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <p><%= flash[:message] %> </p>
      </div>
      <% end %>
      <table id="searchableTable" class="table table-hover table-striped" >
      <tr class="info">
        <th><h3>Sensor Id</h3></th>
        <th><h3>Temperature</h3></th>
        <th><h3>Air Humidity %</h3></th>
        <th><h3>Carbon Monoxide Level</h3></th>
        <th><h3>Device Health Status</h3></th>
        <th><h3>Created</h3></th>
        <th><h3>Check to Safe</h3></th>
      </tr>
        <% @sensors.each do |sensor| %>
          <tr style="text-align:left; <%= sensor[:risky] ? 'background-color: red; color: white' : '' %>">
            <td><%= sensor[:id] %></td>
            <td><%= sensor[:temperature] %></td>
            <td><%= sensor[:air_humidity_percentage] %></td>
            <td><%= sensor[:carbon_monoxide_level] %></td>
            <td><%= sensor[:device_health_status] %></td>
            <td><%= sensor[:created_at] %></td>
            <% if sensor[:status] == "Check" %>
              <td><button type="button" class="btn-success" onclick="setSensorSafe(<%= sensor[:id] %>)">Check</button></td>
            <% elsif sensor[:status] ==  "OK - Handled" %>
              <td>OK - Handled</td>
            <% else %>
              <td>OK</td>
            <% end %>
          </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>
